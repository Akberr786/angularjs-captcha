!function(a){"use strict";function b(){var b={},c={captchaEndpoint:""};return{setSettings:function(a){b=a},$get:function(){return a.extend(c,b),c.captchaEndpoint=c.captchaEndpoint.replace(/\/+$/g,""),c}}}function c(a,b,c){return{getScript:function(b){a({method:"GET",url:b}).then(function(a){new Function(a.data)()},function(a){throw new Error(a.data)})},loadScriptIncludes:function(a){var d=a[0].querySelector("#BDC_VCID_"+b.captchaStyleName).value,e=c.captchaEndpoint+"?get=script-include&c="+b.captchaStyleName+"&t="+d+"&cs=200";this.getScript(e)}}}function d(a,b,c,d){return{restrict:"E",link:function(e,f,g){var h=g.stylename?g.stylename:"defaultCaptcha";a.captchaStyleName=h,b({method:"GET",url:c.captchaEndpoint,params:{get:"html",c:h}}).then(function(a){f.html(a.data.replace(/<script.*<\/script>/g,"")),d.loadScriptIncludes(f)},function(a){throw new Error(a.data)})}}}function e(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=e;h.$setValidity("incorrectCaptcha",!1),c.bind("blur",function(){g=c.val(),0!==g.length&&(f||(f=new a),f.validateUnSafe(function(a){a?h.$setValidity("incorrectCaptcha",!0):(h.$setValidity("incorrectCaptcha",!1),f.reloadImage())}))})}}}function f(a,b){var c=function(){if(void 0===window.botdetect)throw new Error('Can not create Captcha instance, please put "new Captcha()" inside function that will be invoked after form is submitted.');var b=c.getInstance();this.captchaStyleName=a.captchaStyleName,this.captchaId=b.captchaId,this.userInput=b.userInput,this.validationUrl=b.validationUrl};return c.getInstance=function(){return a.captchaStyleName?window.botdetect.getInstanceByStyleName(a.captchaStyleName):null},c.prototype.validateUnSafe=function(a){var c=!1;0!==this.userInput.value.length?b({method:"GET",url:this.validationUrl,params:{i:this.userInput.value}}).then(function(b){c=b.data,a(c)},function(a){throw new Error(a.data)}):a(c)},c.prototype.reloadImage=function(){c.getInstance().reloadImage()},c}a.module("BotDetectCaptcha",[]).provider("captchaSettings",b).factory("captchaHelper",["$http","$rootScope","captchaSettings",c]).factory("Captcha",["$rootScope","$http",f]).directive("botdetectCaptcha",["$rootScope","$http","captchaSettings","captchaHelper",d]).directive("correctCaptcha",["Captcha",e])}(window.angular);
//# sourceMappingURL=angularjs-captcha.min.js.map