!function(a){"use strict";function b(){var b={},c={captchaEndpoint:""};return{setSettings:function(a){b=a},$get:function(){return a.extend(c,b),c.captchaEndpoint=c.captchaEndpoint.replace(/\/+$/g,""),c}}}function c(a,b,c){return{getScript:function(b){a({method:"GET",url:b}).then(function(a){new Function(a.data)()},function(a){throw new Error(a.data)})},loadScriptIncludes:function(a){var d=a[0].querySelector("#BDC_VCID_"+b.captchaStyleName).value,e=c.captchaEndpoint+"?get=script-include&c="+b.captchaStyleName+"&t="+d+"&cs=200";this.getScript(e)},useUserInputBlurValidation:function(a){return null!==a.getAttribute("correct-captcha")},validateUnSafe:function(b,c){var d=b.userInput;if(0!==d.length)a({method:"GET",url:b.validationUrl,params:{i:d}}).then(function(a){var b=a.data;c(b)},function(a){throw new Error(a.data)});else{c(!1)}}}}function d(a,b,c,d){return{restrict:"E",link:function(e,f,g){var h=g.stylename?g.stylename:"defaultCaptcha";a.captchaStyleName=h,b({method:"GET",url:c.captchaEndpoint,params:{get:"html",c:h}}).then(function(a){f.html(a.data.replace(/<script.*<\/script>/g,"")),d.loadScriptIncludes(f)},function(a){throw new Error(a.data)})}}}function e(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g,h,i=f;i.$setValidity("incorrectCaptcha",!1),d.bind("blur",function(){h=d.val(),0!==h.length&&(g||(g=new a),b.validateUnSafe(g,function(a){a?i.$setValidity("incorrectCaptcha",!0):(i.$setValidity("incorrectCaptcha",!1),g.reloadImage())}))})}}}function f(a,b,c){var d=function(){if(void 0===window.botdetect)throw new Error('Can not create Captcha instance, please put "new Captcha()" inside function that will be invoked after form is submitted.');var b=d.getInstance();this.captchaStyleName=a.captchaStyleName,this.captchaId=b.captchaId,this.userInput=b.userInput,this.validationUrl=b.validationUrl};return d.getInstance=function(){return a.captchaStyleName?window.botdetect.getInstanceByStyleName(a.captchaStyleName):null},d.prototype.validateUnSafe=function(a){var b=this;c.validateUnSafe(this,function(d){a(d),c.useUserInputBlurValidation(b.userInput)||d||b.reloadImage()})},d.prototype.reloadImage=function(){d.getInstance().reloadImage()},d}a.module("BotDetectCaptcha",[]).provider("captchaSettings",b).factory("captchaHelper",["$http","$rootScope","captchaSettings",c]).factory("Captcha",["$rootScope","$http","captchaHelper",f]).directive("botdetectCaptcha",["$rootScope","$http","captchaSettings","captchaHelper",d]).directive("correctCaptcha",["Captcha","captchaHelper",e])}(window.angular);
//# sourceMappingURL=angularjs-captcha.min.js.map