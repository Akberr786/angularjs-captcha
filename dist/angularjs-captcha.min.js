!function(a){"use strict";function b(a){a.interceptors.push("captchaHttpInterceptor")}function c(){var b={},c={captchaEndpoint:""};return{setSettings:function(a){b=a},$get:function(){return a.extend(c,b),c}}}function d(){return function(a){return a.replace(/\/+$/g,"")}}function e(a){return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},buildUrl:function(a,b){var c=[];for(var d in b)"string"==typeof d&&c.push(d+"="+b[d]);return/\?+/g.test(a)?a+"&"+c.join("&"):a+"?"+c.join("&")},scriptInclude:function(b,c){var d=a.document.createElement("script");return d.src=b,d.className=c,d}}}function f(){return{request:function(a){return a.beforeSend&&a.beforeSend(),a}}}function g(a,b,c,d,e,f){return{restrict:"E",link:function(g,h,i){var j,k,l,m,n,o;j=i.stylename?i.stylename:"defaultCaptcha",b.captchaStyleName=j,k=d("captchaEndpointFilter")(f.trim(e.captchaEndpoint)),m=f.buildUrl(k,{get:"script-include"}),l=a.find("body")[0],c({method:"GET",url:k,params:{get:"html",c:j},beforeSend:function(){0===a[0].getElementsByClassName("BDC_ScriptInclude").length&&l.append(f.scriptInclude(m,"BDC_ScriptInclude")),n=a[0].getElementsByClassName("BDC_InitScriptInclude"),0!==n.length&&n[0].parentNode.removeChild(n[0])}}).then(function(a){var b=a.data.replace(/<script.*<\/script>/g,"");h.html(b),o=f.buildUrl(k,{get:"init-script-include",c:j,t:h[0].querySelector("#BDC_VCID_"+j).value,cs:"200"}),l.append(f.scriptInclude(o,"BDC_InitScriptInclude"))},function(a){throw new Error(a.data)})}}}function h(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=e;h.$setValidity("correctCaptcha",!1),c.bind("blur",function(){(g=c.val())&&(f||(f=new a),f.validate(g).then(function(a){a?h.$setValidity("correctCaptcha",!0):(h.$setValidity("correctCaptcha",!1),f.reloadImage())}))})}}}function i(a,b){var c=function(){if("undefined"==typeof BotDetect)throw new Error('Can not create Captcha instance, please put "new Captcha()" inside function that will be invoked after form is submitted.');this.captchaStyleName=a.captchaStyleName,this.captchaId=c.getBotDetectInstance().captchaId};return c.botdetectInstance=null,c.getBotDetectInstance=function(){return a.captchaStyleName?(c.botdetectInstance&&c.botdetectInstance.captchaStyleName===a.captchaStyleName||(c.botdetectInstance=BotDetect.getInstanceByStyleName(a.captchaStyleName)),c.botdetectInstance):null},c.prototype.validate=function(a){return b({method:"GET",url:c.getBotDetectInstance().validationUrl,params:{i:a}}).then(function(a){return a.data},function(a){return a.data})},c.prototype.reloadImage=function(){c.getBotDetectInstance().reloadImage()},c}a.module("BotDetectCaptcha",[]).config(["$httpProvider",b]).provider("captchaSettings",c).filter("captchaEndpointFilter",d).factory("captchaHelper",["$window",e]).factory("captchaHttpInterceptor",f).factory("Captcha",["$rootScope","$http",i]).directive("botdetectCaptcha",["$document","$rootScope","$http","$filter","captchaSettings","captchaHelper",g]).directive("correctCaptcha",["Captcha",h])}(window.angular);
//# sourceMappingURL=angularjs-captcha.min.js.map